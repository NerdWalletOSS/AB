Make sure that all changes to the database are within a transaction

Inform RTS needs to be fixed
